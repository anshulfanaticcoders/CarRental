Sicily By Car booking fields (what we send / what we get)

Environment
- Base: https://booking.sbc.it/dev
- Path: /v2/{accountCode}/reservations/create and /reservations/commit
- Auth header: X-API-Key: 24e07.Demo

Create Reservation (POST /reservations/create)
Required by SBC:
- pickupLocationId
- pickupDateTime (yyyy-MM-ddTHH:mm)
- dropoffDateTime (yyyy-MM-ddTHH:mm)
- vehicleId
- rateId
- driver.firstName
- driver.lastName
- voucher.number

Optional but used:
- availabilityId (if available)
- dropoffLocationId
- posCountry
- include[] (optional extras/protections)
- driver.age
- driver.email
- driver.phone
- flights.pickupFlightNumber
- notes

Example payload we send
{
  "availabilityId": "abd14364fe9b4a12981472e6ace189c9",
  "pickupLocationId": "IT091",
  "pickupDateTime": "2026-03-01T10:00",
  "dropoffLocationId": "IT094",
  "dropoffDateTime": "2026-03-08T10:00",
  "posCountry": "DE",
  "vehicleId": "B",
  "rateId": "BASIC-POA",
  "include": ["AD1", "CPP"],
  "voucher": { "number": "BOOK-XXXX", "amount": 100.00 },
  "driver": {
    "firstName": "Mario",
    "lastName": "Rossi",
    "age": 30,
    "email": "mario.rossi@example.com",
    "phone": "+4930123456"
  },
  "flights": { "pickupFlightNumber": "LH123" },
  "notes": "Test booking from curl"
}

Create Reservation response (typical)
{
  "requestId": "req_...",
  "reservation": {
    "id": "SBC0K2CW4",
    "status": "Uncommitted",
    "confirmationNumber": null
  },
  "expiration": "2026-02-16T10:30:00Z",
  "errors": null
}

Commit Reservation (POST /reservations/commit)
Required:
- reservationId

Example payload
{ "reservationId": "SBC0K2CW4" }

Commit response (typical)
{
  "requestId": "req_...",
  "reservation": {
    "id": "SBC0K2CW4",
    "status": "Confirmed",
    "confirmationNumber": "IT587909803"
  },
  "errors": null
}

What we store in our DB
- bookings.provider_source = sicily_by_car
- bookings.provider_booking_ref = confirmationNumber (or reservation id if no confirmation)
- bookings.provider_metadata.sbc = {
    availability_id,
    rate_id,
    vehicle_id,
    payment_type,
    currency
  }
- booking_extras = selected include[] services
- booking_amounts + booking_payments are saved as usual
